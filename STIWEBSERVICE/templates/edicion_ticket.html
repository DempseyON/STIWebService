{% extends "index.html" %}
{% block content %}
<div class="container mt-5">
  <h1 class="text-center mb-4">Editar Ticket</h1>

  <!-- Información del Ticket -->
  <div class="card shadow-sm mb-4">
      <div class="card-header bg-secondary text-white">
          <h5 class="mb-0">Información del Ticket</h5>
      </div>
      <div class="card-body">
          <p><strong>ID del Ticket:</strong> <span id="ticketId">101</span></p>
          <p><strong>Nombre del Solicitante:</strong> <span id="ticketName">Juan Pérez</span></p>
          <p><strong>Correo Electrónico:</strong> <span id="ticketEmail">juan@example.com</span></p>
          <p><strong>Departamento:</strong> <span id="ticketDepartment">Soporte Técnico</span></p>
      </div>
  </div>

  <!-- Formulario de Edición -->
  <div class="card shadow-sm">
      <div class="card-header bg-secondary text-white">
          <h5 class="mb-0">Editar Información del Ticket</h5>
      </div>
      <div class="card-body">
          <form id="editTicketForm">
              <div class="mb-3">
                  <label for="ticketStatus" class="form-label">Estado</label>
                  <select class="form-select" id="ticketStatus" name="status" required>
                      <option value="Pendiente" selected>Pendiente</option>
                      <option value="En Progreso">En Progreso</option>
                      <option value="Resuelto">Resuelto</option>
                  </select>
              </div>
              <div class="mb-3">
                  <label for="ticketPriority" class="form-label">Prioridad</label>
                  <select class="form-select" id="ticketPriority" name="priority" required>
                      <option value="Alta" selected>Alta</option>
                      <option value="Media">Media</option>
                      <option value="Baja">Baja</option>
                  </select>
              </div>
              <div class="mb-3">
                  <label for="assignedTo" class="form-label">Asignado a</label>
                  <select class="form-select" id="assignedTo" name="assignedTo" required>
                      <option value="Técnico 1">Técnico 1</option>
                      <option value="Técnico 2">Técnico 2</option>
                      <option value="Sin Asignar" selected>Sin Asignar</option>
                  </select>
              </div>
              <button type="submit" class="btn btn-primary w-100">Guardar Cambios</button>
          </form>
      </div>
  </div>

  <!-- Botón de Cancelar -->
  <div class="mt-3 text-center">
      <a href="/dashboard" class="btn btn-secondary">Cancelar y Volver</a>
  </div>
</div>

<!-- Bootstrap Bundle JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<!-- Simulación de Datos -->
<script>
  // Datos simulados
  const ticketData = {
      id: 101,
      name: "Juan Pérez",
      email: "juan@example.com",
      department: "Soporte Técnico",
      status: "Pendiente",
      priority: "Alta",
      assignedTo: "Sin Asignar"
  };

  // Mostrar datos iniciales
  document.getElementById("ticketId").innerText = ticketData.id;
  document.getElementById("ticketName").innerText = ticketData.name;
  document.getElementById("ticketEmail").innerText = ticketData.email;
  document.getElementById("ticketDepartment").innerText = ticketData.department;
  document.getElementById("ticketStatus").value = ticketData.status;
  document.getElementById("ticketPriority").value = ticketData.priority;
  document.getElementById("assignedTo").value = ticketData.assignedTo;

  // Manejar envío del formulario
  document.getElementById("editTicketForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const updatedStatus = document.getElementById("ticketStatus").value;
      const updatedPriority = document.getElementById("ticketPriority").value;
      const updatedAssignedTo = document.getElementById("assignedTo").value;

      console.log("Cambios Guardados:");
      console.log("Estado:", updatedStatus);
      console.log("Prioridad:", updatedPriority);
      console.log("Asignado a:", updatedAssignedTo);

      alert("Los cambios han sido guardados correctamente.");
  });
</script>
{% endblock %}