{% extends "index.html" %}
{% block content %}
<div class="container mt-5">
  <h1 class="text-center mb-4">Panel de Administración</h1>

  <!-- Opciones de Administración -->
  <div class="row mb-4">
      <div class="col-md-4">
          <div class="card shadow-sm">
              <div class="card-body text-center">
                  <h5 class="card-title">Gestión de Usuarios</h5>
                  <p class="card-text">Agregar, editar o eliminar usuarios del sistema.</p>
                  <a href="/admin/usuarios" class="btn btn-primary w-100">Ir a Gestión de Usuarios</a>
              </div>
          </div>
      </div>
      <div class="col-md-4">
          <div class="card shadow-sm">
              <div class="card-body text-center">
                  <h5 class="card-title">Departamentos</h5>
                  <p class="card-text">Configurar departamentos para asignar tickets.</p>
                  <a href="/admin/departamentos" class="btn btn-primary w-100">Ir a Departamentos</a>
              </div>
          </div>
      </div>
      <div class="col-md-4">
          <div class="card shadow-sm">
              <div class="card-body text-center">
                  <h5 class="card-title">Generar Reportes</h5>
                  <p class="card-text">Exportar datos de tickets en formato PDF o Excel.</p>
                  <a href="/admin/reportes" class="btn btn-primary w-100">Generar Reportes</a>
              </div>
          </div>
      </div>
  </div>

  <!-- Resumen del Sistema -->
  <h2 class="mb-3">Resumen del Sistema</h2>
  <div class="row text-center mb-4">
      <div class="col-md-3">
          <div class="card bg-primary text-white shadow-sm">
              <div class="card-body">
                  <h5 class="card-title">Total de Tickets</h5>
                  <p class="display-6" id="totalTickets">0</p>
              </div>
          </div>
      </div>
      <div class="col-md-3">
          <div class="card bg-warning text-white shadow-sm">
              <div class="card-body">
                  <h5 class="card-title">Tickets Pendientes</h5>
                  <p class="display-6" id="pendingTickets">0</p>
              </div>
          </div>
      </div>
      <div class="col-md-3">
          <div class="card bg-success text-white shadow-sm">
              <div class="card-body">
                  <h5 class="card-title">Tickets Resueltos</h5>
                  <p class="display-6" id="resolvedTickets">0</p>
              </div>
          </div>
      </div>
      <div class="col-md-3">
          <div class="card bg-danger text-white shadow-sm">
              <div class="card-body">
                  <h5 class="card-title">Tickets Sin Asignar</h5>
                  <p class="display-6" id="unassignedTickets">0</p>
              </div>
          </div>
      </div>
  </div>

  <!-- Tabla de Actividad Reciente -->
  <h2 class="mb-3">Actividad Reciente</h2>
  <div class="card shadow-sm">
      <div class="card-header bg-secondary text-white">
          <h5 class="mb-0">Últimos Tickets</h5>
      </div>
      <div class="card-body">
          <table class="table table-striped">
              <thead>
                  <tr>
                      <th>ID</th>
                      <th>Usuario</th>
                      <th>Departamento</th>
                      <th>Estado</th>
                      <th>Fecha</th>
                  </tr>
              </thead>
              <tbody id="recentActivity">
                  <tr>
                      <td colspan="5" class="text-center">No hay actividad reciente.</td>
                  </tr>
              </tbody>
          </table>
      </div>
  </div>
</div>

<!-- Bootstrap Bundle JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<!-- Simulación de Datos -->
<script>
  // Simulación de datos
  const summary = {
      totalTickets: 150,
      pendingTickets: 45,
      resolvedTickets: 90,
      unassignedTickets: 15
  };

  const recentTickets = [
      { id: 101, user: "Juan Pérez", department: "Soporte Técnico", status: "Pendiente", date: "2024-11-28" },
      { id: 102, user: "Ana López", department: "Facturación", status: "Resuelto", date: "2024-11-27" },
      { id: 103, user: "Carlos Ruiz", department: "Recursos Humanos", status: "Sin Asignar", date: "2024-11-27" },
  ];

  // Actualizar el resumen
  document.getElementById("totalTickets").innerText = summary.totalTickets;
  document.getElementById("pendingTickets").innerText = summary.pendingTickets;
  document.getElementById("resolvedTickets").innerText = summary.resolvedTickets;
  document.getElementById("unassignedTickets").innerText = summary.unassignedTickets;

  // Actualizar la tabla de actividad reciente
  const recentActivityTable = document.getElementById("recentActivity");
  recentActivityTable.innerHTML = recentTickets.map(ticket => `
      <tr>
          <td>${ticket.id}</td>
          <td>${ticket.user}</td>
          <td>${ticket.department}</td>
          <td>${ticket.status}</td>
          <td>${ticket.date}</td>
      </tr>
  `).join("");
</script>
{% endblock %}